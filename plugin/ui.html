<h2>Figma Vox</h2>
<button id="create">Voice</button>
<script>
  window.onmessage = async (event) => {
    const fetchData = () => {
      if (event.data.pluginMessage.type === 'networkRequest') {
        var request = new XMLHttpRequest();
        request.overrideMimeType('application/json');
        try {
          request.open('GET', 'http://localhost:8000/api/commands', true);
        } catch (error) {
          console.log(error);
        } finally {
          setTimeout(getMachineAction, 2000);
        }
        request.onload = () => {
          var jsonResponse = JSON.parse(request.responseText);
          window.parent.postMessage({ pluginMessage: request.response }, '*');
        };
        request.send(null);
      }
    };
    fetchData();
  };
</script>
